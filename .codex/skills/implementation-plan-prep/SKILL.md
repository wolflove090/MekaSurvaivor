---
name: implementation-plan-prep
description: 仕様書を受け取り、実装前の要件書・計画書・ToDoを順番に作成する。機能実装に着手する前に、要件整理と実装計画の明文化が必要なときに使う。特に「仕様から要件定義したい」「plan.mdを更新したい」「実装フェーズを分解したtodo.mdを作りたい」という依頼で使用する。
---

# Implementation Plan Prep

以下を順番に実行する。順序を入れ替えない。
**このスキルが有効になったスレッドで実装作業は行わない。**

## 0. 事前確認

- 受け取った仕様を要約し、不明点があれば先に確認する。
- 既存の関連ドキュメントを読む。
  - `Documentation/` 配下の既存要件・計画資料
  - 実装対象に関係するソースファイル
- 既存コードの構造に基づいて計画を立てる。推測だけで変更提案しない。

## 1. 仕様から要件書を定義

要件書を作成後、ユーザーに要件書のチェックと必要に応じた調整を依頼します。
ユーザーからの完了報告があるまで待機します。

- 入力仕様をもとに要件書を作成する。
- 出力先は `Documentation/要件書` 配下にする。
- 要件書には最低限以下を含める。
  - 背景と目的
  - スコープ内/スコープ外
  - 機能要件
  - 非機能要件
  - 受け入れ条件
  - 未確定事項・確認事項
- 要件書を提示し、ユーザーにレビューと必要な調整を依頼する。
- ユーザーから「要件書レビュー完了」の明示的な報告があるまで次へ進まない。
- ユーザーが要件書の調整を行なった際は、再度要件書を読み直して最新の情報を理解する。

## 2. 要件書から計画書を作成

- フェーズ1の要件書を入力として、`Documentation/plan.md` を上書き更新する。
- `plan.md` には要件を実装する方法を詳細に記載する。
- 変更提案前に必ず関連ソースファイルを読み、実際のコードベースに合わせる。
- `plan.md` には最低限以下を含める。
  - 実装方針
  - 変更対象ファイル一覧
  - データフロー/処理フロー
  - リスクと対策
  - 検証方針
  - コードスニペット（主要変更のイメージ）

## 3. ToDoを作成

- 計画書作成後、`Documentation/todo.md` を上書き更新する。
- 実装完了に必要な全フェーズと個別タスクを列挙する。
- タスクは実行順がわかるように整理する。
- まだ実装は行わない。

## 出力品質ルール

- ドキュメントは具体的に書く。曖昧語を避ける。
- 要件・計画・ToDoの間で用語と粒度を揃える。
- 変更対象ファイル名、責務、完了条件を明示する。
