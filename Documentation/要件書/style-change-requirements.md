# スタイル変更機能 要件書

## 背景と目的
プレイヤーレベルの進行にあわせて成長選択を追加し、一定レベルごとにスタイル変更を選択できるようにする。既存の武器強化UIを流用しつつ、選択結果を `CharacterStatsData` としてプレイヤーへ反映する。

## スコープ内
- プレイヤーレベルが3上がるごと（3の倍数到達時）にスタイル変更UIを表示する。
- UI形式は既存の武器強化UI（3カード構成）を使い回す。
- スタイル変更時のみ選択肢を「巫女」「メイド」「セレブ」の3つに変更する。
    - 通常のレベルアップ時は武器の強化選択肢を表示します。
- スタイル選択時に該当 `CharacterStatsData`（ScriptableObject）をプレイヤーへ適用する。
- 適用後、プレイヤーの参照ステータス（HP/POW/DEF/SPD）をゲーム内挙動へ反映する。

## 機能要件
1. `GameEvents.OnPlayerLevelUp` 受信時、到達レベルが3の倍数の場合のみスタイル変更UIを開く。
2. UIカードは既存3枠を利用し、カード表示内容をスタイル選択用に置き換える。
3. カード選択肢は以下3種類とする。
- 巫女: HP 15 / POW 1 / DEF 0 / SPD 5
- メイド: HP 10 / POW 1 / DEF 0 / SPD 8
- セレブ: HP 10 / POW 3 / DEF 0 / SPD 5
4. 選択したスタイルに対応する `CharacterStatsData` をプレイヤーへ適用する。
5. UI表示中は既存の武器強化UIと同様にゲーム進行を停止し、選択完了後に再開する。

## 非機能要件
- 既存UXML/USS構造を破壊しない。
- 既存コード規約（暗黙private、`_camelCase`、ドキュメントコメント）を守る。
- 参照未設定時はnullガードで安全に処理する。

## 受け入れ条件
- レベル2ではスタイルUIが表示されず、レベル3で表示される。
- レベルが3の倍数以外の場合は通常の武器強化UIが表示される。
- 表示カードが「巫女」「メイド」「セレブ」になっている。
- いずれかを選ぶとプレイヤーへ対応 `CharacterStatsData` が反映される。
- スタイル変更時は「消費したHP量」を維持して現在HPを再計算する（例: `5/10 -> 10/15`）。
- 選択後にUIが閉じ、ゲームが再開される。

## 未確定事項・確認事項
- なし
