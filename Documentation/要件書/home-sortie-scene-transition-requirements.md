# ホーム出撃導線 要件書

## 背景と目的
- ホーム画面の `HomeScreenUiController` では、「出撃」ボタン押下時に現在はログ出力のみを行っており、サバイバーゲーム開始導線が未接続である。
- `Assets/Home/Home.unity` から `Assets/Survaivor/Main.unity` へ遷移し、ボタン操作だけでゲームプレイを開始できる状態にする。
- ホーム画面とサバイバーゲームを最小構成で繋ぎ込み、今後のホーム導線拡張（図鑑、着替え、物語）と同じ接続方式へ展開しやすくする。

## スコープ内
- ホーム画面の「出撃」ボタン押下時に、サバイバーゲームシーンへ遷移する導線を追加する。
- 遷移先を既存の `Assets/Survaivor/Main.unity` に固定し、遷移後に既存の `GameManager` と `PlayerController` を含むゲーム進行が開始される状態にする。
- シーン遷移に必要なシーン参照設定、またはビルド設定上のシーン登録を追加する。
- 遷移失敗時に原因を把握できるログまたは警告を出せるようにする。

## スコープ外
- 「図鑑」「着替え」「物語」ボタンの遷移実装。
- ローディング演出、画面フェード、遷移アニメーションの追加。
- ホーム画面へ戻る導線の実装。
- シーン遷移共通基盤の大規模抽象化。
- セーブデータやプレイヤー選択情報の引き継ぎ。

## 機能要件
1. 出撃ボタン導線
- `HomeScreenUiController` の「出撃」ボタン押下イベントは、ログ出力のみで終了せずサバイバーゲーム開始処理を実行する。
- ボタン押下から1回の操作で `Assets/Survaivor/Main.unity` 相当のサバイバーゲームシーンへ遷移できる。
- 同一押下で多重遷移が発生しないようにする。

2. サバイバーゲーム開始
- サバイバーゲームシーン遷移後、既存シーン内の `GameManager` と `PlayerController` により通常どおりゲーム進行が開始される。
- 追加のデバッグ操作やエディタ専用メニューを使わず、ホーム画面から直接プレイ開始できる。

3. シーン参照の解決
- 遷移先シーンは実装時にハードコードが分散しないよう、1箇所で参照管理できる構成にする。
- 遷移先シーン参照は `SceneManager.LoadScene` のシーン名で管理する。
- 実行環境で遷移可能にするため、必要なシーンはビルド設定または同等の実行時解決手段で有効化する。
- シーン参照が未設定、または遷移対象が解決できない場合は、無言で失敗せず検知可能なログを出力する。

## 非機能要件
- 既存コード規約（暗黙private、`_camelCase`、公開APIのドキュメントコメント）を順守する。
- ホーム画面UIの既存UI Toolkit構造（UXML / USS / `HomeScreenUiController`）を維持し、今回の追加でレイアウトを崩さない。
- 変更はホーム導線に必要な最小範囲に留め、サバイバーゲーム本体ロジックの挙動を変更しない。
- 将来ほかのホームボタンにも同様の遷移処理を追加しやすい責務分離を保つ。

## 受け入れ条件
- `Assets/Home/Home.unity` を再生し、「出撃」ボタンを押すとサバイバーゲームシーンへ遷移する。
- 遷移後、サバイバーゲームが停止せず開始され、プレイヤー操作とゲーム進行が行える。
- 「出撃」ボタン押下時に、現状のログ出力のみでホーム画面に留まる状態が解消されている。
- 遷移先シーン参照が不足している場合、Unity Console 上で原因を追跡できるログまたは警告が確認できる。
- 「図鑑」「着替え」「物語」ボタンの既存挙動には影響しない。

## 未確定事項・確認事項
- ビルド設定 `ProjectSettings/EditorBuildSettings.asset` は現状シーン未登録のため、どの方式でシーン登録状態を担保するか確認が必要。
- 今回はホームへ戻る導線を実装しないため、インゲームからホームへ戻る導線実装時に `Time.timeScale` を復元する TODO を残す。
